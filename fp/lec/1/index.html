<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Expressions. Functions. Recursion</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>Expressions. Functions. Recursion</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id=""></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_lets_get_started_with_a_code_example">Let&#8217;s get started with a code example</h3>
<div class="paragraph">
<p>When learning a new programming language, it&#8217;s usually very helpful to see some example code
in that language.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Comparing C and OCaml factorial programs. Note that the factorial function in mathematics is undefined for negative arguments. Our implementation (incorrectly) returns 1 for these input values.</div>
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">factorial.c - C program</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">#include &lt;stdio.h&gt;
/* product of integers from 1 to n */
int factorial(int n) {
    int ans = 1;
    for (int i = 2; i &lt;= n; i++)
        ans *= i;
    return ans;
}

int main() {
    printf("%i", factorial(10));
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">factorial.ml&#8201;&#8212;&#8201;OCaml equivalent</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml">(* product of integers from 1 to n *)
let rec factorial n =
  if n &lt;= 1 then
    1
  else
    factorial (n-1) * n

let () =
  Printf.printf "%i" (factorial 10)</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_compile_and_run_the_program">How to compile and run the program?</h3>
<div class="listingblock">
<div class="content">
<pre>$ ocamlopt -o factorial factorial.ml</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./factorial
3628800</pre>
</div>
</div>
<div class="paragraph">
<p>The compilation command above uses the <em>native code compiler</em> <code>ocamlopt</code>. There is also a <em>byte code compiler</em> <code>ocamlc</code>, which is useful if you want to
debug your code, and an interactive REPL <code>ocaml</code>, which is usually referred as <em>toplevel</em>. There is also a new community-developed toplevel that provides more
features called <code>utop</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ocaml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">interactive toplevel (REPL) (<a href="https://caml.inria.fr/pub/docs/manual-ocaml/toplevel.html">official documentation</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ocamlc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte code compiler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ocamlopt</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">native code compiler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>utop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a new more feature-rich toplevel (REPL)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In the beginning, we will be using a toplevel, <code>ocaml</code> or <code>utop</code>, for running our code interactively, and later we will switch to compilation.
However, it is good to know from the start that all of these options are available for building and running your programs.
Moreover, there is also a possibility to compile OCaml to JavaScript with <a href="https://ocsigen.org/js_of_ocaml/3.1.0/manual/overview">js_of_ocaml</a>
and <a href="https://bucklescript.github.io/">BuckleScript</a> compilers, and although discussing them in depth would probably go beyond the scope of this class,
you might want to use them in the future.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There are many powerful tools in the modern OCaml toolchain. For this course, in addition to the compilers, we will also be using the following programs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>opam</code> package manager. See the <a href="https://opam.ocaml.org/">docs</a> on how to install it on your own computer.<br>
Using <code>opam</code>, install <code>ocamlfind</code> and <code>alcotest</code> packages.</p>
</li>
<li>
<p><code>ocamlfind</code>, a tool for compiling programs with dependencies (<a href="http://ocaml.org/learn/tutorials/compiling_ocaml_projects.html">see docs</a>).</p>
</li>
<li>
<p><code>alcotest</code>, a simple unit testing library.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The textbook also describes how to use <code>ocamlbuild</code> building system and <code>OUnit</code> unit testing library, feel free to use them too, but we will
be using <code>ocamlfind</code> and <code>alcotest</code> instead in this course.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_expressions">Expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Open terminal and start an interactive OCaml toplevel session.
(We use a Unix tool <code>rlwrap</code> to make it more user-friendly, alternatively, if you have installed <code>utop</code>, you can use it instead of the official toplevel,
then you don&#8217;t need <code>rlwrap</code>.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ rlwrap ocaml</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ utop</pre>
</div>
</div>
<div class="paragraph">
<p>We can use toplevel as a calculator, for instance here we compute several arithmetic expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml">        OCaml version 4.07.1

# 1 + 2 ;;
- : int = 3

# 10 + 3 * 5 ;;
- : int = 25

# (10 + 3) * 5 ;;
- : int = 65</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that we need to put double semicolon <code>;;</code> after each expression to tell the program process our input. This double semicolon
is not required in actual programs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Some integer operators. See more in the <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html">standard library documentation</a>.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">addition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">subtraction and unary negation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiplication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer division (remainder discarded)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">remainder</p></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Think of a functional program as an <strong>expression</strong>, like <code>(1 + 2) * (20 / 3)</code>, which gets <strong>evaluated</strong>
the same way as arithmetic expressions get computed in mathematics:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml">    (1 + 2) * (20 / 3)
--&gt; (3) * (20 / 3)
--&gt; (3) * (6)
--&gt; 18</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is no statements in functional programming, only expressions. Even <code>if then else</code> conditions are expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml"># 50 + (if 1 &lt; 2 then 200 else 300) * 5 ;;
- : int = 1050</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parentheses are used to control the order of expression evaluation. Compare to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml"># 50 + if 1 &lt; 2 then 200 else 300 * 5 ;;
- : int = 250</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml"># if 1 &lt; 2 then
    (if 100&gt;20 then 5 else 10) + 15
  else
    145 ;;
- : int = 20</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Polymorphic comparison operators. See more in the <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html">standard library documentation</a>.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">greater</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less or equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">greater or equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not equal</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All comparison operators return a value of type <code>bool</code>, which is either <code>true</code> or <code>false</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In OCaml, there are also operators <code>==</code> and <code>!=</code>, which determine <em>physical equality</em> of objects
(that is, checking that they are located at the same place in the computer memory, and so are physically the same).
There are very few situations when you might want to use those operators.</p>
</div>
<div class="paragraph">
<p>Instead, use <code>=</code> and <code>&lt;&gt;</code> for checking equality and inequality.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_name_binding">Name binding</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We define <code>x</code> equal to <code>123</code> and then define a function <code>square</code> that returns its argument squared:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml"># let n = 123 ;;
val n : int = 123

# n + n ;;
- : int = 246

# let square x = x * x ;;
val square : int -&gt; int = &lt;fun&gt;

# square 12 ;;
- : int = 144

# square n ;;
- : int = 15129</code></pre>
</div>
</div>
<div class="paragraph">
<p>Define a function <code>max_of_two</code> that takes two arguments and returns the one that is larger:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml"># let max_of_two x y =
    if x &gt; y then
      x
    else
      y ;;
val max_of_two : 'a -&gt; 'a -&gt; 'a = &lt;fun&gt;

# max_of_two 11 222 ;;
- : int = 222

# max_of_two 17 15 ;;
- : int = 17

# square (max_of_two 10 25) ;;
- : int = 625</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Operator Precedence</div>
<div class="paragraph">
<p>As a rule of thumb, remember that in OCaml, the order of expression evaluation is as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Function application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unary operators (unary <code>+</code>, <code>-</code>, <code>not</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Binary operators (<code>*</code>, <code>/</code>, binary <code>+</code>, <code>-</code>, <code>&lt;</code>, <code>&gt;</code> <code>&amp;&amp;</code>, <code>||</code>, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if then else</code> and other control flow constructs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Because of that,</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>max_of_two 40 20 + 100</code>, functions are applied <strong>before</strong> operators, evaluating to <code>140</code>, not <code>120</code>.</p>
</li>
<li>
<p><code>max_of_two (square 5) (4 + 10)</code>, using functions and operators inside function arguments require parentheses.</p>
</li>
<li>
<p>In particular, <code>max_of_two (-5) 10</code>, negated function arguments require parentheses.</p>
</li>
<li>
<p><code>if 1 &gt; 0 then 100 else 200 + square 50</code>, the plus is inside the else clause, <code>(200 + square 50)</code>,
so the expression is evaluating to <code>100</code>, not <code>2600</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For details, see the operator precedence and associativity table in the
<a href="https://caml.inria.fr/pub/docs/manual-ocaml/expr.html">reference manual</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keeping_declarations_in_a_file">Keeping declarations in a file</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of typing declarations in the command line, let&#8217;s put them in a file, which we can call, for example, <code>square_max.ml</code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">square_max.ml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml">let n = 123

let square x = x * x

let max_of_two x y =
  if x &gt; y then
    x
  else
    y</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Now, open toplevel again. The program we just wrote can be loaded in the toplevel using directive <code>#use</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml">$ rlwrap ocaml
        OCaml version 4.07.1

# #use "square_max.ml" ;;
val n : int = 123
val square : int -&gt; int = &lt;fun&gt;
val max_of_two : 'a -&gt; 'a -&gt; 'a = &lt;fun&gt;

# n + 50 ;;
- : int = 173

# square 12 ;;
- : int = 144

# square (5 + 2) ;;
- : int = 49

# max_of_two (square 5) (-4) ;;
- : int = 25</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_type_inference_in_ocaml">Type inference in OCaml</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Why the type of the function <code>square</code> is <code>int &#8594; int</code>,
whereas for the function <code>max_of_two</code>, it is <code>'a &#8594; 'a &#8594; 'a</code>?</p>
</div>
<div class="paragraph">
<p>In OCaml, <strong>types are inferred</strong> by the compiler if you don&#8217;t specify them yourself.
The type inference algorithm is using the fact that each previously defined operator or function already has a type.</p>
</div>
<div class="paragraph">
<p>Since the multiplication operator <code>*</code> has the type <code>int &#8594; int &#8594; int</code> (takes two integers and returns an integer),
the <code>square</code> function must have the type <code>int &#8594; int</code> to conform to the type of <code>*</code>.</p>
</div>
<div class="paragraph">
<p>On the other hand, the <code>&gt;</code> operator is <em>polymorphic</em>, which means it can compare not only integers, but also floats, strings, and any other
compound data types. The polymorphism of the <code>&gt;</code> operator is expressed in its type: <code>'a &#8594; 'a &#8594; bool</code>
(here, <code>'a</code> is a <em>type variable</em>, which indicates that the operator arguments can be of <em>any type</em>).
Because of that, the type inference algorithm deduces that the function <code>max_of_two</code> is also polymorphic,
and has the type <code>'a &#8594; 'a &#8594; 'a</code>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://i.imgur.com/lTA0HsT.jpg" alt="Dynamic typing and static typing" width="400">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercises">Exercises</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>max_of_three x y z</code> </dt>
<dd>
<p>the maximum of three arguments</p>
</dd>
<dt class="hdlist1"><code>is_even x</code> </dt>
<dd>
<p>check if the argument is even</p>
</dd>
<dt class="hdlist1"><code>is_odd x</code> </dt>
<dd>
<p>check if the argument is odd</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Boolean operators. See more in the <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html">standard library documentation</a>.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;&amp;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logical and</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>||</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logical or</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logical negation</p></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>is_leap_year y</code> </dt>
<dd>
<p>check if <code>y</code> is a <a href="https://en.wikipedia.org/wiki/Leap_year#Algorithm">leap year</a>. The logic of the decision is as follows:</p>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>if (year is not divisible by 4) then (it is a common year)<br>
else if (year is not divisible by 100) then (it is a leap year)<br>
else if (year is not divisible by 400) then (it is a common year)<br>
else (it is a leap year)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_recursive_declarations">Recursive declarations</h2>
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="https://i.imgur.com/mn3RtsH.jpg" alt="Recursion" width="550">
</div>
</div>
<div class="paragraph">
<p>Recursive function declarations must start with <code>let rec</code> instead of simple <code>let</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml">let rec factorial n =
  if n &lt;= 1 then
    1
  else
    factorial (n-1) * n</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercises_2">Exercises</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>sum_range a b</code></p>
</div>
<div class="paragraph">
<p>The sum of all integers in the range from <code>a</code> to <code>b</code> (that is, for all <code>a</code> &le; <code>x</code> &le; <code>b</code> ).<br>
<strong>Example:</strong> <code>sum_range 1 5</code> should be equal to <code>1 + 2 + 3 + 4 + 5 = 15</code>.</p>
</div>
<div class="paragraph">
<p> <details><summary style="cursor: pointer; color: #baa;"> &#x1f424; <i>click to open</i> </summary><div> </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>let rec sum_range a b =
  if a &gt; b then
    0  (* base case: empty range *)
  else
    sum_range a (b-1) + b</code></pre>
</div>
</div>
<div class="paragraph">
<p> </div></details> </p>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>prod_range a b</code></p>
</div>
<div class="paragraph">
<p>The product of all integers in the range from <code>a</code> to <code>b</code></p>
</div>
<div class="paragraph">
<p> <details><summary style="cursor: pointer; color: #baa;"> &#x1f424; <i>click to open</i> </summary><div> </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>let rec prod_range a b =
  if a &gt; b then
    1
  else
    prod_range a (b-1) * b</code></pre>
</div>
</div>
<div class="paragraph">
<p> </div></details> </p>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>num_digits x</code></p>
</div>
<div class="paragraph">
<p>The number of (decimal) digits in the integer <code>x</code>. (Should work correctly for all integers.)</p>
</div>
<div class="paragraph">
<p> <details><summary style="cursor: pointer; color: #baa;"> &#x1f424; <i>click to open</i> </summary><div> </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>let rec num_digits n =
  if abs n &lt; 10 then
    1
  else
    num_digits (n/10) + 1</code></pre>
</div>
</div>
<div class="paragraph">
<p> </div></details> </p>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>sum_digits x</code></p>
</div>
<div class="paragraph">
<p>The sum of all (decimal) digits of <code>x</code></p>
</div>
<div class="paragraph">
<p> <details><summary style="cursor: pointer; color: #baa;"> &#x1f424; <i>click to open</i> </summary><div> </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>let rec sum_digits n =
  if abs n &lt; 10 then
    abs n
  else
    sum_digits (n/10) + abs (n mod 10)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Without using function <code>abs</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>let rec sum_digits n =
  if n &lt; 0 then
    sum_digits (-n)
  else
    if n &lt; 10 then
      n
    else
      sum_digits (n/10) + (n mod 10)</code></pre>
</div>
</div>
<div class="paragraph">
<p> </div></details> </p>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>nth_digit i x</code></p>
</div>
<div class="paragraph">
<p><code>i</code>-th (decimal) digit of the integer <code>x</code>. Assume digits are indexed left-to-right, starting at <code>i</code>=1.
The function should return 0 for invalid values of <code>i</code>.</p>
</div>
<div class="paragraph">
<p><strong>Examples:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>nth_digit 1 7025 = 7
nth_digit 2 7025 = 0
nth_digit 3 7025 = 2
nth_digit 4 7025 = 5
nth_digit 1 0 = 0
nth_digit 1 (-7025) = 7
nth_digit 3 (-7025) = 2
nth_digit (-1) 7025 = 0
nth_digit 0 7025 = 0
nth_digit 5 7025 = 0</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>binom n k</code></p>
</div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Binomial_coefficient">Binomial coefficient</a> <em>C(n,k)</em>,
implemented recursively using <a href="https://en.wikipedia.org/wiki/Pascal%27s_rule">Pascal&#8217;s identity</a>.</p>
</div>
<div class="paragraph">
<p>Since this mathematical function is normally defined only for <em>0 &le; k &le; n</em>,
make the function return zero for other values of <code>n</code> and <code>k</code>.
This extension of the definition is consistent with Pascal&#8217;s identity and the meaning of the coefficient
(for instance, there is 0 ways to select 10 items out of 9 available).</p>
</div>
<div class="paragraph">
<p><strong>Examples:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>binom 5 0 = 1
binom 5 1 = 5
binom 5 2 = 10
binom 5 100 = 0</code></pre>
</div>
</div>
<div class="paragraph">
<p> <details><summary style="cursor: pointer; color: #baa;"> &#x1f424; <i>click to open</i> </summary><div> </p>
</div>
<div class="paragraph">
<p>A simpler solution that does not handle impossible cases of, e.g. <em>k &lt; 0</em> or <em>k &gt; n</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>(*  (n, k) = (n-1,k-1) + (n-1,k)   *)
let rec binom n k =
  if k = 0 then
    1  (* Left edge of Pascal's tringle *)
  else if k = n then
    1  (* Right edge of Pascal's triangle *)
  else
    binom (n-1) (k-1) + binom (n-1) k</code></pre>
</div>
</div>
<div class="paragraph">
<p>A more complex solution that handles impossible cases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>let rec binom n k =
  if k &lt; 0 || k &gt; n then 0
  else if k = 0 || k = n then 1
  else binom (n-1) (k-1) + binom (n-1) k</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>let rec binom n k =
  if k &lt; 0 || k &gt; n then 0
  else if k = 0 &amp;&amp; n = 0 then 1
  else binom (n-1) (k-1) + binom (n-1) k</code></pre>
</div>
</div>
<div class="paragraph">
<p> </div></details> </p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions_are_values_anonymous_functions">Functions are values. Anonymous functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following two function definitions are equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml">let square1 x = x * x

let square2 = (fun x -&gt; x * x)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Functions are values, just like numbers.
<code>(fun x -&gt; x * x)</code> is a valid expression for a square function, and we save it in the variable <code>square2</code>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml"># let square2 = (fun x -&gt; x * x) ;;
val square2 : int -&gt; int = &lt;fun&gt;

# square2 12 ;;
- : int = 144</code></pre>
</div>
</div>
<div class="paragraph">
<p>Moreover, we can apply <code>(fun x -&gt; x * x)</code> directly to an argument, and it will return that argument squared:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml"># (fun x -&gt; x*x) 7 ;;
- : int = 49</code></pre>
</div>
</div>
<div class="paragraph">
<p>Such functions that are created without giving them a name are called <strong>anonymous functions</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml"># (fun a b -&gt; a &lt; b) 100 200 ;;
- : bool = true

# (fun a b c -&gt; a + b + c) 10 20 30 ;;
- : int = 60

# 5 + (fun a b c -&gt; a + b + c) 10 20 30 * 2 ;;
- : int = 125</code></pre>
</div>
</div>
<div class="paragraph">
<p>The computational model of functional programming (which is called <em>lambda calculus</em>) is based on simple substitution:
you plug in arguments, then simplify. Repeat until you are done
(you still have to pay attention to the order of evaluation, just like in arithmetic, <code>*</code> goes before <code>+</code> and <code>-</code>,
and so on, according to the operator precedence order).</p>
</div>
<div class="paragraph">
<p>The example above gets evaluated as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml">    5 + (fun a b c -&gt; a + b + c) 10 20 30 * 2

--&gt; 5 + (10 + 20 + 30) * 2

--&gt; 5 + 60 * 2

--&gt; 5 + 120

--&gt; 125</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since anonymous functions cannot refer to themselves by name, it seems that they should not be able to establish recursive computation on their own.</p>
</div>
<div class="paragraph">
<p>This is not actually the case. It is possible to use so called fixed-point combinators,
such as <a href="https://rosettacode.org/wiki/Y_combinator#OCaml">Y combinator</a>,
or a self-application <a href="http://okmij.org/ftp/Computation/fixed-point-combinators.html#Self-application">U combinator</a>
to implement recursion using only anonymous functions.
This is not a very practical approach for implementing recursion, but it does have some use cases
<a href="http://okmij.org/ftp/Computation/overriding-selfapplication.html">(1)</a>
<a href="https://blog.klipse.tech/assets/y-in-practical-programs.pdf">(2)</a>
besides its theoretical value in lambda calculus.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">A minimal example with Y combinator:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-ocaml hljs" data-lang="ocaml">(* Here, we define Y combinator using a let-rec name binding.
   It is also possible to define it as an anonymous function
   (see the link above) but that's a bit more cumbersome in
   a typed functional language like OCaml. *)
# let rec y f x = f (y f) x ;;
val y : (('a -&gt; 'b) -&gt; 'a -&gt; 'b) -&gt; 'a -&gt; 'b = &lt;fun&gt;

(* Factorial of 5 *)
# y (fun g x -&gt; if x = 0 then 1 else x * (g (x-1))) 5 ;;
- : int = 120</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can try to evaluate this expression on paper by doing substitutions. You will see that it works.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-05-29 19:14:40 -0400
</div>
</div>
<link rel="stylesheet" href="../highlight/styles/github.min.css">
<script src="../highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>